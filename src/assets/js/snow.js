!function(){"use strict";function t(){"undefined"!=typeof Salla&&Salla.ready?Salla.ready((function(){e()})):e()}function e(){const t=document.getElementById("snow-canvas");if(!t||!window.tholthSettings?.winterMode)return;const e=window.innerWidth<=768,n=window.tholthSettings?.enableSnowMobile||!1;if(e&&!n)return void console.log("Tholth: Snow effect disabled on mobile");const i=parseInt(t.dataset.intensity||window.tholthSettings?.snowIntensity||50),o=t.dataset.color||window.tholthSettings?.snowColor||"#FFFFFF",a="true"===t.dataset.mobile?1:e?0:1;if(0===i||0===a)return;const s=t.getContext("2d");function d(){t.width=window.innerWidth,t.height=window.innerHeight}let h;d(),window.addEventListener("resize",(function(){clearTimeout(h),h=setTimeout((function(){d(),u=c()}),250)}));class r{constructor(){this.reset()}reset(){this.x=Math.random()*t.width,this.y=Math.random()*-t.height,this.radius=3*Math.random()+1,this.speed=1*Math.random()+.5,this.wind=.5*Math.random()-.25,this.opacity=.6*Math.random()+.4}update(){this.y+=this.speed,this.x+=this.wind,this.y>t.height&&(this.y=-10,this.x=Math.random()*t.width),this.x>t.width?this.x=0:this.x<0&&(this.x=t.width)}draw(){var t,e;s.beginPath(),s.arc(this.x,this.y,this.radius,0,2*Math.PI),s.fillStyle=(t=o,e=this.opacity,"rgba("+parseInt(t.slice(1,3),16)+", "+parseInt(t.slice(3,5),16)+", "+parseInt(t.slice(5,7),16)+", "+e+")"),s.fill(),s.closePath()}}function c(){const t=Math.floor(i/100*150)*a,e=[];for(let n=0;n<t;n++)e.push(new r);return e}let l,u=c();function w(){s.clearRect(0,0,t.width,t.height),u.forEach((function(t){t.update(),t.draw()})),l=requestAnimationFrame(w)}w(),document.addEventListener("visibilitychange",(function(){document.hidden?l&&cancelAnimationFrame(l):w()})),"undefined"!=typeof Salla&&Salla.event&&Salla.event.on("cart.updated",(function(){const t=u.length;u=u.slice(0,Math.floor(t/2)),setTimeout((function(){u=c()}),2e3)})),console.log("Tholth: Snow effect initialized with intensity "+i)}if("loading"===document.readyState?document.addEventListener("DOMContentLoaded",t):t(),window.matchMedia("(prefers-reduced-motion: reduce)").matches){console.log("Tholth: Snow effect disabled due to user motion preferences");const t=document.getElementById("snow-canvas");t&&(t.style.display="none")}}();
//# sourceMappingURL=snow.js.map
